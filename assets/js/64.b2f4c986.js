(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{471:function(s,a,e){"use strict";e.r(a);var t=e(20),n=Object(t.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h3",{attrs:{id:"打包需要部署的文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#打包需要部署的文件"}},[s._v("#")]),s._v(" 打包需要部署的文件")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("npm run build\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("可以看到，项目目录下的 build 就是我们要部署的静态资源了。")]),s._v(" "),e("h3",{attrs:{id:"新建-dockerfile"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#新建-dockerfile"}},[s._v("#")]),s._v(" 新建 Dockerfile")]),s._v(" "),e("p",[s._v("在根目录下执行：touch Dockerfile")]),s._v(" "),e("h3",{attrs:{id:"拉取-nginx-镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#拉取-nginx-镜像"}},[s._v("#")]),s._v(" 拉取 Nginx 镜像")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker pull nginx\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("blockquote",[e("p",[s._v("也可以在后续Dockerfile运行时拉取镜像")])]),s._v(" "),e("p",[s._v("在根目录创建 Nginx 配置文件：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("touch default.conf\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("写入：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("server {\n    listen       80;\n    server_name  localhost;\n\n    #charset koi8-r;\n    access_log  /var/log/nginx/host.access.log  main;\n    error_log  /var/log/nginx/error.log  error;\n\n    location / {\n        root   /usr/share/nginx/html;\n        index  index.html index.htm;\n    }\n\n    error_page   500 502 503 504  /50x.html;\n    location = /50x.html {\n        root   /usr/share/nginx/html;\n    }\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br")])]),e("h3",{attrs:{id:"配置镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置镜像"}},[s._v("#")]),s._v(" 配置镜像")]),s._v(" "),e("p",[s._v("打开Dockerfile文件，写入：")]),s._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token constant"}},[s._v("FROM")]),s._v(" nginx  \n"),e("span",{pre:!0,attrs:{class:"token constant"}},[s._v("COPY")]),s._v(" dist"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("share"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("nginx"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("html"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("  \n"),e("span",{pre:!0,attrs:{class:"token constant"}},[s._v("COPY")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("conf "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("nginx"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("conf"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("d"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("conf  \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("解释一下代码：")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("FROM nginx 指定该镜像是基于 nginx:latest 镜像而构建的；")])]),s._v(" "),e("li",[e("p",[s._v("COPY dist/ /usr/share/nginx/html/ 命令的意思是将项目根目录下 dist 文件夹中的所有文件复制到镜像中 /usr/share/nginx/html/ 目录下；")])]),s._v(" "),e("li",[e("p",[s._v("COPY default.conf /etc/nginx/conf.d/default.conf 将 default.conf 复制到 etc/nginx/conf.d/default.conf，用本地的 default.conf 配置来替换 Nginx 镜像里的默认配置。")])])]),s._v(" "),e("h3",{attrs:{id:"构建镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#构建镜像"}},[s._v("#")]),s._v(" 构建镜像")]),s._v(" "),e("p",[s._v("Docker 通过 build 命令来构建镜像：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker build -t docker-demo-vue .\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/72205a4bd7d645e8aba8f94f9720974b~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image",alt:"image"}})]),s._v(" "),e("p",[s._v("出现上面的信息，表示构建成成功了。")]),s._v(" "),e("p",[s._v("参数说明：")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("-t 参数给镜像命名 docker-demo-vue")])]),s._v(" "),e("li",[e("p",[s._v(". 是基于当前目录的 Dockerfile 来构建镜像")])])]),s._v(" "),e("p",[s._v("运行docker image ls | grep docker-demo-vue查看镜像，也可以在docker中也可以查看生成的镜像")]),s._v(" "),e("h3",{attrs:{id:"运行容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#运行容器"}},[s._v("#")]),s._v(" 运行容器")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker run -d -p 3000:80 --name docker-vue docker-demo-vue\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("参数解释：")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("-d 设置容器在后台运行")])]),s._v(" "),e("li",[e("p",[s._v("-p 表示端口映射，把本机的 3000 端口映射到 container 的 80 端口（这样外网就能通过本机的 3000 端口访问了。")])]),s._v(" "),e("li",[e("p",[s._v("--name 设置容器名 docker-vue")])]),s._v(" "),e("li",[e("p",[s._v("docker-demo-vue 是我们上面构建的镜像名字")])])]),s._v(" "),e("p",[s._v("可以运行docker ps -a 查看容器id，同样的也可以在桌面端看到，正在运行的docker容器")]),s._v(" "),e("p",[s._v("也可以使用curl -v -i localhost:3000 去查看对应的静态文件")])])}),[],!1,null,null,null);a.default=n.exports}}]);